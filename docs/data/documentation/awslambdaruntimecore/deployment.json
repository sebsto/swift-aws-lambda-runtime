{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/awslambdaruntimecore\/deployment"]}],"sections":[],"identifier":{"url":"doc:\/\/AWSLambdaRuntimeCore\/documentation\/AWSLambdaRuntimeCore\/Deployment","interfaceLanguage":"swift"},"kind":"article","hierarchy":{"paths":[["doc:\/\/AWSLambdaRuntimeCore\/documentation\/AWSLambdaRuntimeCore"]]},"schemaVersion":{"minor":3,"major":0,"patch":0},"metadata":{"roleHeading":"Article","modules":[{"name":"AWSLambdaRuntimeCore"}],"title":"Deploying your Swift Lambda functions","role":"article"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Overview","anchor":"overview","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"There are multiple ways to deploy your Swift code to AWS Lambda. The very first time, you’ll probably use the AWS Console to create a new Lambda function and upload your code as a zip file. However, as you iterate on your code, you’ll want to automate the deployment process.","type":"text"}]},{"inlineContent":[{"type":"text","text":"To take full advantage of the cloud, we recommend using Infrastructure as Code (IaC) tools like the "},{"identifier":"https:\/\/aws.amazon.com\/serverless\/sam\/","type":"reference","isActive":true},{"text":" or ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/aws.amazon.com\/cdk\/"},{"text":". These tools allow you to define your infrastructure and deployment process as code, which can be version-controlled and automated.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In this section, we show you how to deploy your Swift Lambda functions using different AWS Tools. Alternatively, you might also consider using popular third-party tools like "},{"isActive":true,"identifier":"https:\/\/www.serverless.com\/","type":"reference"},{"text":", ","type":"text"},{"type":"reference","identifier":"https:\/\/www.terraform.io\/","isActive":true},{"type":"text","text":", or "},{"identifier":"https:\/\/www.pulumi.com\/","type":"reference","isActive":true},{"type":"text","text":" to deploy Lambda functions and create and manage AWS infrastructure."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Here is the content of this guide:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"#prerequisites"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"#choosing-the-aws-region-where-to-deploy"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"#the-lambda-execution-iam-role","isActive":true,"type":"reference"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"#deploy-your-lambda-function-with-the-aws-console","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"#deploy-your-lambda-function-with-the-aws-command-line-interface-cli","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"#deploy-your-lambda-function-with-aws-serverless-application-model-sam","isActive":true,"type":"reference"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"#deploy-your-lambda-function-with-aws-cloud-development-kit-cdk"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"#third-party-tools","isActive":true}]}]}]},{"anchor":"Prerequisites","text":"Prerequisites","type":"heading","level":2},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"Your AWS Account","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"To deploy a Lambda function on AWS, you need an AWS account. If you don’t have one yet, you can create a new account at "},{"identifier":"https:\/\/signin.aws.amazon.com\/signup?request_type=register","isActive":true,"type":"reference"},{"type":"text","text":". It takes a few minutes to register. A credit card is required."}],"type":"paragraph"},{"inlineContent":[{"text":"We do not recommend using the root credentials you entered at account creation time for day-to-day work. Instead, create an ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_users.html"},{"text":" with the necessary permissions and use its credentials.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Follow the steps in "},{"type":"reference","isActive":true,"identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_users_create.html"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We suggest to attach the "},{"code":"AdministratorAccess","type":"codeVoice"},{"text":" policy to the user for the initial setup. For production workloads, you should follow the principle of least privilege and grant only the permissions required for your users. The ","type":"text"},{"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/access_policies_managed-vs-inline.html#aws-managed-policies","isActive":true},{"text":" to manage all resources on the AWS account.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"AWS Security Credentials","type":"text"}]},{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/security-creds.html","type":"reference"},{"type":"text","text":" are required to access the AWS console, AWS APIs, or to let tools access your AWS account."}]},{"type":"paragraph","inlineContent":[{"text":"AWS Security Credentials can be ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"long-term credentials"}]},{"type":"text","text":" (for example, an Access Key ID and a Secret Access Key attached to your IAM user) or "},{"inlineContent":[{"type":"text","text":"temporary credentials"}],"type":"strong"},{"type":"text","text":" obtained via other AWS API, such as when accessing AWS through single sign-on (SSO) or when assuming an IAM role."}]},{"inlineContent":[{"text":"To follow the steps in this guide, you need to know your AWS Access Key ID and Secret Access Key. If you don’t have them, you can create them in the AWS Management Console. Follow the steps in ","type":"text"},{"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_credentials_access-keys.html#Using_CreateAccessKey","isActive":true},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"When you use SSO with your enterprise identity tools (such as Microsoft entra ID –formerly Active Directory–, Okta, and others) or when you write scripts or code assuming an IAM role, you receive temporary credentials. These credentials are valid for a limited time, have a limited scope, and are rotated automatically. You can use them in the same way as long-term credentials. In addition to an AWS Access Key and Secret Access Key, temporary credentials include a session token.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Here is a typical set of temporary credentials (redacted for security).","type":"text"}]},{"code":["{","  \"Credentials\": {","     \"AccessKeyId\": \"ASIA...FFSD\",","     \"SecretAccessKey\": \"Xn...NL\",","     \"SessionToken\": \"IQ...pV\",","     \"Expiration\": \"2024-11-23T11:32:30+00:00\"","  }","}"],"type":"codeListing","syntax":"json"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A Swift Lambda function to deploy."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You need a Swift Lambda function to deploy. If you don’t have one yet, you can use one of the examples in the "},{"type":"reference","identifier":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/tree\/main\/Examples","isActive":true},{"type":"text","text":" directory."}]},{"type":"paragraph","inlineContent":[{"text":"Compile and package the function using the following command","type":"text"}]},{"code":["swift package archive --allow-network-connections docker"],"type":"codeListing","syntax":"sh"},{"type":"paragraph","inlineContent":[{"text":"This command creates a ZIP file with the compiled Swift code. The ZIP file is located in the ","type":"text"},{"code":".build\/plugins\/AWSLambdaPackager\/outputs\/AWSLambdaPackager\/MyLambda\/MyLambda.zip","type":"codeVoice"},{"type":"text","text":" folder."}]},{"inlineContent":[{"type":"text","text":"The name of the ZIP file depends on the target name you entered in the "},{"code":"Package.swift","type":"codeVoice"},{"type":"text","text":" file."}],"type":"paragraph"}]}]},{"level":2,"type":"heading","text":"Choosing the AWS Region where to deploy","anchor":"Choosing-the-AWS-Region-where-to-deploy"},{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/aws.amazon.com\/about-aws\/global-infrastructure\/"},{"text":" spans over 34 geographic Regions (and continuously expanding). When you create a resource on AWS, such as a Lambda function, you have to select a geographic region where the resource will be created. The two main factors to consider to select a Region are the physical proximity with your users and geographical compliance.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Physical proximity helps you reduce the network latency between the Lambda function and your customers. For example, when the majority of your users are located in South-East Asia, you might consider deploying in the Singapore, the Malaysia, or Jakarta Region.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Geographical compliance, also known as data residency compliance, involves following location-specific regulations about how and where data can be stored and processed."}]},{"anchor":"The-Lambda-execution-IAM-role","level":2,"text":"The Lambda execution IAM role","type":"heading"},{"inlineContent":[{"text":"A Lambda execution role is an AWS Identity and Access Management (IAM) role that grants your Lambda function the necessary permissions to interact with other AWS services and resources. Think of it as a security passport that determines what your function is allowed to do within AWS. For example, if your Lambda function needs to read files from Amazon S3, write logs to Amazon CloudWatch, or access an Amazon DynamoDB table, the execution role must include the appropriate permissions for these actions.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"When you create a Lambda function, you must specify an execution role. This role contains two main components: a trust policy that allows the Lambda service itself to assume the role, and permission policies that determine what AWS resources the function can access. By default, Lambda functions get basic permissions to write logs to CloudWatch Logs, but any additional permissions (like accessing S3 buckets or sending messages to SQS queues) must be explicitly added to the role’s policies. Following the principle of least privilege, it’s recommended to grant only the minimum permissions necessary for your function to operate, helping maintain the security of your serverless applications.","type":"text"}],"type":"paragraph"},{"type":"heading","anchor":"Deploy-your-Lambda-function-with-the-AWS-Console","level":2,"text":"Deploy your Lambda function with the AWS Console"},{"inlineContent":[{"text":"In this section, we deploy the HelloWorld example function using the AWS Console. The HelloWorld function is a simple function that takes a ","type":"text"},{"type":"codeVoice","code":"String"},{"type":"text","text":" as input and returns a "},{"type":"codeVoice","code":"String"},{"text":".","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Authenticate on the AWS console using your IAM username and password. On the top right side, select the AWS Region where you want to deploy, then navigate to the Lambda section.","type":"text"}]},{"inlineContent":[{"identifier":"console-10-regions","type":"image"}],"type":"paragraph"},{"text":"Create the function","level":3,"type":"heading","anchor":"Create-the-function"},{"type":"paragraph","inlineContent":[{"text":"Select ","type":"text"},{"inlineContent":[{"type":"text","text":"Create a function"}],"type":"strong"},{"text":" to create a function.","type":"text"}]},{"type":"paragraph","inlineContent":[{"identifier":"console-20-dashboard","type":"image"}]},{"type":"paragraph","inlineContent":[{"text":"Select ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Author function from scratch"}]},{"text":". Enter a ","type":"text"},{"inlineContent":[{"type":"text","text":"Function name"}],"type":"strong"},{"text":" (","type":"text"},{"code":"HelloWorld","type":"codeVoice"},{"type":"text","text":") and select "},{"type":"codeVoice","code":"Amazon Linux 2"},{"text":" as ","type":"text"},{"type":"strong","inlineContent":[{"text":"Runtime","type":"text"}]},{"text":".","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Select the architecture. When you compile your Swift code on a x84_64 machine, such as an Intel Mac, select "},{"type":"codeVoice","code":"x86_64"},{"text":". When you compile your Swift code on an Arm machine, such as the Apple Silicon M1 or more recent, select ","type":"text"},{"type":"codeVoice","code":"arm64"},{"text":".","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Select ","type":"text"},{"type":"strong","inlineContent":[{"text":"Create function","type":"text"}]}]},{"inlineContent":[{"type":"image","identifier":"console-30-create-function"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"On the right side, select "},{"type":"strong","inlineContent":[{"type":"text","text":"Upload from"}]},{"type":"text","text":" and select "},{"inlineContent":[{"text":".zip file","type":"text"}],"type":"strong"},{"type":"text","text":"."}]},{"inlineContent":[{"identifier":"console-40-select-zip-file","type":"image"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Select the zip file created with the "},{"code":"swift package archive --allow-network-connections docker","type":"codeVoice"},{"type":"text","text":" command as described in the "},{"overridingTitleInlineContent":[{"text":"Prerequisites","type":"text"}],"overridingTitle":"Prerequisites","isActive":true,"type":"reference","identifier":"#prerequisites"},{"text":" section.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Select "},{"type":"strong","inlineContent":[{"type":"text","text":"Save"}]}]},{"inlineContent":[{"identifier":"console-50-upload-zip","type":"image"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You’re now ready to test your function."}]},{"level":3,"anchor":"Invoke-the-function","type":"heading","text":"Invoke the function"},{"inlineContent":[{"text":"Select the ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Test"}]},{"text":" tab in the console and prepare a payload to send to your Lambda function. In this example, you’ve deployed the ","type":"text"},{"type":"reference","identifier":"Exmaples.HelloWorld\/README.md","isActive":true},{"type":"text","text":" example function. As explained, the function takes a "},{"type":"codeVoice","code":"String"},{"text":" as input and returns a ","type":"text"},{"type":"codeVoice","code":"String"},{"text":". we will therefore create a test event with a JSON payload that contains a ","type":"text"},{"code":"String","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Select ","type":"text"},{"inlineContent":[{"text":"Create new event","type":"text"}],"type":"strong"},{"text":". Enter an ","type":"text"},{"type":"strong","inlineContent":[{"text":"Event name","type":"text"}]},{"text":". Enter ","type":"text"},{"code":"\"Swift on Lambda\"","type":"codeVoice"},{"text":" as ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Event JSON"}]},{"type":"text","text":". Note that the payload must be a valid JSON document, hence we use surrounding double quotes ("},{"type":"codeVoice","code":"\""},{"text":").","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Select ","type":"text"},{"type":"strong","inlineContent":[{"text":"Test","type":"text"}]},{"text":" on the upper right side of the screen.","type":"text"}]},{"inlineContent":[{"identifier":"console-60-prepare-test-event","type":"image"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"The response of the invocation and additional meta data appear in the green section of the page.","type":"text"}]},{"inlineContent":[{"type":"text","text":"You can see the response from the Swift code: "},{"code":"Hello Swift on Lambda","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The function consumed 109.60ms of execution time, out of this 83.72ms where spent to initialize this new runtime. This initialization time is known as Lambda cold start time."}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Lambda cold start time refers to the initial delay that occurs when a Lambda function is invoked for the first time or after being idle for a while. Cold starts happen because AWS needs to provision and initialize a new container, load your code, and start your runtime environment (in this case, the Swift runtime). This delay is particularly noticeable for the first invocation, but subsequent invocations (known as “warm starts”) are typically much faster because the container and runtime are already initialized and ready to process requests. Cold starts are an important consideration when architecting serverless applications, especially for latency-sensitive workloads. Usually, compiled languages, such as Swift, Go, and Rust, have shorter cold start times compared to interpreted languages, such as Python, Java, Ruby, and Node.js.","type":"text"}]}],"style":"note","type":"aside","name":"Note"},{"code":["","![Console - view invocation result](console-70-view-invocation-response)","","Select **Test** to invoke the function again with the same payload. ","","Observe the results. No initialization time is reported because the Lambda execution environment was ready after the first invocation. The runtime duration of the second invocation is 1.12ms.","","```text","REPORT RequestId: f789fbb6-10d9-4ba3-8a84-27aa283369a2\tDuration: 1.12 ms\tBilled Duration: 2 ms\tMemory Size: 128 MB\tMax Memory Used: 26 MB\t"],"syntax":"text","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"AWS lambda charges usage per number of invocations and the CPU time, rounded to the next millisecond. AWS Lambda offers a generous free-tier of 1 million invocation each month and 400,000 GB-seconds of compute time per month. See "},{"identifier":"https:\/\/aws.amazon.com\/lambda\/pricing\/","isActive":true,"type":"reference"},{"type":"text","text":" for the details."}]},{"type":"heading","anchor":"Delete-the-function","text":"Delete the function","level":3},{"inlineContent":[{"text":"When you’re finished with testing, you can delete the Lambda function and the IAM execution role that the console created automatically.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"While you are on the ","type":"text"},{"code":"HelloWorld","type":"codeVoice"},{"type":"text","text":" function page in the AWS console, select "},{"type":"strong","inlineContent":[{"text":"Actions","type":"text"}]},{"type":"text","text":", then "},{"inlineContent":[{"type":"text","text":"Delete function"}],"type":"strong"},{"type":"text","text":" in the menu on the top-right part of the page."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"console-80-delete-function"}]},{"type":"paragraph","inlineContent":[{"text":"Then, navigate to the IAM section of the AWS console. Select ","type":"text"},{"inlineContent":[{"type":"text","text":"Roles"}],"type":"strong"},{"type":"text","text":" on the right-side menu and search for "},{"type":"codeVoice","code":"HelloWorld"},{"type":"text","text":". The console appended some random characters to role name. The name you see on your console is different that the one on the screenshot."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Select the "},{"type":"codeVoice","code":"HelloWorld-role-xxxx"},{"text":" role and select ","type":"text"},{"inlineContent":[{"type":"text","text":"Delete"}],"type":"strong"},{"type":"text","text":". Confirm the deletion by entering the role name again, and select "},{"inlineContent":[{"text":"Delete","type":"text"}],"type":"strong"},{"type":"text","text":" on the confirmation box."}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"console-80-delete-role"}]},{"level":2,"anchor":"Deploy-your-Lambda-function-with-the-AWS-Command-Line-Interface-CLI","type":"heading","text":"Deploy your Lambda function with the AWS Command Line Interface (CLI)"},{"inlineContent":[{"text":"You can deploy your Lambda function using the AWS Command Line Interface (CLI). The CLI is a unified tool to manage your AWS services from the command line and automate your operations through scripts. The CLI is available for Windows, macOS, and Linux. Follow the ","type":"text"},{"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/getting-started-install.html","isActive":true},{"text":" and ","type":"text"},{"type":"reference","identifier":"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/cli-configure-quickstart.html","isActive":true},{"text":" instructions in the AWS CLI User Guide.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In this example, we’re building the HelloWorld example from the "},{"overridingTitleInlineContent":[{"text":"Examples","type":"text"}],"type":"reference","identifier":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/tree\/main\/Examples","overridingTitle":"Examples","isActive":true},{"text":" directory.","type":"text"}],"type":"paragraph"},{"anchor":"Create-the-function","type":"heading","level":3,"text":"Create the function"},{"inlineContent":[{"type":"text","text":"To create a function, you must first create the function execution role and define the permission. Then, you create the function with the "},{"type":"codeVoice","code":"create-function"},{"text":" command.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The command assumes you’ve already created the ZIP file with the ","type":"text"},{"type":"codeVoice","code":"swift package archive --allow-network-connections docker"},{"type":"text","text":" command, as described in the "},{"type":"reference","identifier":"#prerequisites","overridingTitle":"Prerequisites","overridingTitleInlineContent":[{"type":"text","text":"Prerequisites"}],"isActive":true},{"text":" section.","type":"text"}],"type":"paragraph"},{"syntax":"sh","type":"codeListing","code":["# enter your AWS Account ID ","export AWS_ACCOUNT_ID=123456789012","","# Allow the Lambda service to assume the execution role","cat <<EOF > assume-role-policy.json","{","    \"Version\": \"2012-10-17\",","    \"Statement\": [","        {","            \"Effect\": \"Allow\",","            \"Principal\": {","                \"Service\": \"lambda.amazonaws.com\"","            },","            \"Action\": \"sts:AssumeRole\"","        }","    ]","}","EOF","","# Create the execution role","aws iam create-role \\","--role-name lambda_basic_execution \\","--assume-role-policy-document file:\/\/assume-role-policy.json","","# create permissions to associate with the role","cat <<EOF > permissions.json","{","    \"Version\": \"2012-10-17\",","    \"Statement\": [","        {","            \"Effect\": \"Allow\",","            \"Action\": [","                \"logs:CreateLogGroup\",","                \"logs:CreateLogStream\",","                \"logs:PutLogEvents\"","            ],","            \"Resource\": \"arn:aws:logs:*:*:*\"","        }","    ]","}","EOF","","# Attach the permissions to the role","aws iam put-role-policy \\","--role-name lambda_basic_execution \\","--policy-name lambda_basic_execution_policy \\","--policy-document file:\/\/permissions.json","","# Create the Lambda function","aws lambda create-function \\","--function-name MyLambda \\","--zip-file fileb:\/\/.build\/plugins\/AWSLambdaPackager\/outputs\/AWSLambdaPackager\/MyLambda\/MyLambda.zip \\","--runtime provided.al2 \\","--handler provided  \\","--architectures arm64 \\","--role arn:aws:iam::${AWS_ACCOUNT_ID}:role\/lambda_basic_execution"]},{"inlineContent":[{"type":"text","text":"The "},{"code":"--architectures","type":"codeVoice"},{"type":"text","text":" flag is only required when you build the binary on an Apple Silicon machine (Apple M1 or more recent). It defaults to "},{"code":"x64","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To update the function, use the "},{"code":"update-function-code","type":"codeVoice"},{"text":" command after you’ve recompiled and archived your code again with the ","type":"text"},{"type":"codeVoice","code":"swift package archive"},{"type":"text","text":" command."}]},{"syntax":"sh","type":"codeListing","code":["aws lambda update-function-code \\","--function-name MyLambda \\","--zip-file fileb:\/\/.build\/plugins\/AWSLambdaPackager\/outputs\/AWSLambdaPackager\/MyLambda\/MyLambda.zip"]},{"level":3,"text":"Invoke the function","type":"heading","anchor":"Invoke-the-function"},{"inlineContent":[{"type":"text","text":"Use the "},{"type":"codeVoice","code":"invoke-function"},{"text":" command to invoke the function. You can pass a well-formed JSON payload as input to the function. The payload must be encoded in base64. The CLI returns the status code and stores the response in a file.","type":"text"}],"type":"paragraph"},{"code":["# invoke the function","aws lambda invoke \\","--function-name MyLambda \\","--payload $(echo \\\"Swift Lambda function\\\" | base64)  \\","out.txt","","# show the response","cat out.txt","","# delete the response file","rm out.txt"],"type":"codeListing","syntax":"sh"},{"text":"Delete the function","anchor":"Delete-the-function","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"To cleanup, first delete the Lambda funtion, then delete the IAM role."}]},{"type":"codeListing","syntax":"sh","code":["# delete the Lambda function","aws lambda delete-function --function-name MyLambda","","# delete the IAM policy attached to the role","aws iam delete-role-policy --role-name lambda_basic_execution --policy-name lambda_basic_execution_policy","","# delete the IAM role","aws iam delete-role --role-name lambda_basic_execution"]},{"text":"Deploy your Lambda function with AWS Serverless Application Model (SAM)","level":2,"type":"heading","anchor":"Deploy-your-Lambda-function-with-AWS-Serverless-Application-Model-SAM"},{"type":"paragraph","inlineContent":[{"type":"text","text":"AWS Serverless Application Model (SAM) is an open-source framework for building serverless applications. It provides a simplified way to define the Amazon API Gateway APIs, AWS Lambda functions, and Amazon DynamoDB tables needed by your serverless application. You can define your serverless application in a single file, and SAM will use it to deploy your function and all its dependencies."}]},{"type":"paragraph","inlineContent":[{"text":"To use SAM, you need to ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/docs.aws.amazon.com\/serverless-application-model\/latest\/developerguide\/serverless-sam-cli-install.html"},{"type":"text","text":" on your machine. The SAM CLI provides a set of commands to package, deploy, and manage your serverless applications."}]},{"inlineContent":[{"type":"text","text":"Use SAM when you want to deploy more than a Lambda function. SAM helps you to create additional resources like an API Gateway, an S3 bucket, or a DynamoDB table, and manage the permissions between them."}],"type":"paragraph"},{"type":"heading","anchor":"Create-the-function","text":"Create the function","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"We assume your Swift function is compiled and packaged, as described in the "},{"isActive":true,"identifier":"#prerequisites","overridingTitleInlineContent":[{"type":"text","text":"Prerequisites"}],"overridingTitle":"Prerequisites","type":"reference"},{"type":"text","text":" section."}]},{"type":"paragraph","inlineContent":[{"text":"When using SAM, you describe the infrastructure you want to deploy in a YAML file. The file contains the definition of the Lambda function, the IAM role, and the permissions needed by the function. The SAM CLI uses this file to package and deploy your function.","type":"text"}]},{"inlineContent":[{"text":"You can create a SAM template to define a REST API implemented by AWS API Gateway and a Lambda function with the following command","type":"text"}],"type":"paragraph"},{"code":["cat <<EOF > template.yaml","AWSTemplateFormatVersion: '2010-09-09'","Transform: AWS::Serverless-2016-10-31","Description: SAM Template for APIGateway Lambda Example","","Resources:","  # Lambda function","  APIGatewayLambda:","    Type: AWS::Serverless::Function","    Properties:","      # the directory name and ZIP file names depends on the Swift executable target name","      CodeUri: .build\/plugins\/AWSLambdaPackager\/outputs\/AWSLambdaPackager\/APIGatewayLambda\/APIGatewayLambda.zip","      Timeout: 60","      Handler: swift.bootstrap  # ignored by the Swift runtime","      Runtime: provided.al2","      MemorySize: 512","      Architectures:","        - arm64","      # The events that will trigger this function  ","      Events:","        HttpApiEvent:","          Type: HttpApi # AWS API Gateway v2","","Outputs:","  # display API Gateway endpoint","  APIGatewayEndpoint:","    Description: \"API Gateway endpoint URI\"","    Value: !Sub \"https:\/\/${ServerlessHttpApi}.execute-api.${AWS::Region}.amazonaws.com\"","EOF"],"type":"codeListing","syntax":"sh"},{"inlineContent":[{"type":"text","text":"In this example, the Lambda function must accept an APIGateway v2 JSON payload as input parameter and return a valid APIGAteway v2 JSON response. See the example code in the "},{"identifier":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/blob\/main\/Examples\/APIGateway\/README.md","type":"reference","isActive":true},{"type":"text","text":"."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"To deploy the function with SAM, use the ","type":"text"},{"code":"sam deploy","type":"codeVoice"},{"type":"text","text":" command. The very first time you deploy a function, you should use the "},{"type":"codeVoice","code":"--guided"},{"type":"text","text":" flag to configure the deployment. The command will ask you a series of questions to configure the deployment."}]},{"inlineContent":[{"text":"Here is the command to deploy the function with SAM:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["# start the first deployment ","sam deploy --guided ","","Configuring SAM deploy","======================","","        Looking for config file [samconfig.toml] :  Not found","","        Setting default arguments for 'sam deploy'","        =========================================","        Stack Name [sam-app]: APIGatewayLambda","        AWS Region [us-east-1]: ","        #Shows you resources changes to be deployed and require a 'Y' to initiate deploy","        Confirm changes before deploy [y\/N]: n","        #SAM needs permission to be able to create roles to connect to the resources in your template","        Allow SAM CLI IAM role creation [Y\/n]: y","        #Preserves the state of previously provisioned resources when an operation fails","        Disable rollback [y\/N]: n","        APIGatewayLambda has no authentication. Is this okay? [y\/N]: y","        Save arguments to configuration file [Y\/n]: y","        SAM configuration file [samconfig.toml]: ","        SAM configuration environment [default]: ","","        Looking for resources needed for deployment:","","(redacted for brevity)","","CloudFormation outputs from deployed stack","--------------------------------------------------------------------------------","Outputs                                                                                                                                         ","--------------------------------------------------------------------------------","Key                 APIGatewayEndpoint                                                                                                          ","Description         API Gateway endpoint URI\"                                                                                                    ","Value               https:\/\/59i4uwbuj2.execute-api.us-east-1.amazonaws.com                                                                      ","--------------------------------------------------------------------------------","","","Successfully created\/updated stack - APIGAtewayLambda in us-east-1        "],"syntax":"sh"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To update your function or any other AWS service defined in your YAML file, you can use the "},{"code":"sam deploy","type":"codeVoice"},{"type":"text","text":" command without the "},{"code":"--guided","type":"codeVoice"},{"text":" flag.","type":"text"}]},{"level":3,"type":"heading","anchor":"Invoke-the-function","text":"Invoke the function"},{"inlineContent":[{"type":"text","text":"SAM allows you to invoke the function locally and remotely."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"Local invocations allows you to test your code before uploading it. It requires docker to run.","type":"text"}]},{"type":"codeListing","syntax":"sh","code":["# First, generate a sample event","sam local generate-event apigateway http-api-proxy > event.json ","","# Next, invoke the function locally","sam local invoke -e .\/event.json","","START RequestId: 3f5096c6-0fd3-4605-b03e-d46658e6b141 Version: $LATEST","END RequestId: 3134f067-9396-4f4f-bebb-3c63ef745803","REPORT RequestId: 3134f067-9396-4f4f-bebb-3c63ef745803  Init Duration: 0.04 ms  Duration: 38.38 msBilled Duration: 39 ms  Memory Size: 512 MB     Max Memory Used: 512 MB","{\"body\": \"{\\\"version\\\":\\\"2.0\\\",\\\"routeKey\\\":\\\"$default\\\",\\\"rawPath\\\":\\\"\\\\\/path\\\\\/to\\\\\/resource\\\",... REDACTED FOR BREVITY ...., \"statusCode\": 200, \"headers\": {\"content-type\": \"application\/json\"}}"]},{"content":[{"inlineContent":[{"text":"If you’ve previously authenticated to Amazon ECR Public and your auth token has expired, you may receive an authentication error when attempting to do unauthenticated docker pulls from Amazon ECR Public. To resolve this issue, it may be necessary to run ","type":"text"},{"type":"codeVoice","code":"docker logout public.ecr.aws"},{"text":" to avoid the error. This will result in an unauthenticated pull. For more information, see ","type":"text"},{"isActive":true,"identifier":"https:\/\/docs.aws.amazon.com\/AmazonECR\/latest\/public\/public-troubleshooting.html#public-troubleshooting-authentication","type":"reference"},{"text":".","type":"text"}],"type":"paragraph"}],"name":"Note","type":"aside","style":"note"},{"inlineContent":[{"type":"text","text":"Remote invocations are done with the "},{"code":"sam remote invoke","type":"codeVoice"},{"type":"text","text":" command."}],"type":"paragraph"},{"type":"codeListing","syntax":"sh","code":["sam remote invoke \\","    --stack-name APIGatewayLambda \\","    --event-file .\/event.json","","Invoking Lambda Function APIGatewayLambda                                                         ","START RequestId: ec8082c5-933b-4176-9c63-4c8fb41ca259 Version: $LATEST","END RequestId: ec8082c5-933b-4176-9c63-4c8fb41ca259","REPORT RequestId: ec8082c5-933b-4176-9c63-4c8fb41ca259  Duration: 6.01 ms       Billed Duration: 7 ms     Memory Size: 512 MB     Max Memory Used: 35 MB","{\"body\":\"{\\\"stageVariables\\\":{\\\"stageVariable1\\\":\\\"value1\\\",\\\"stageVariable2\\\":\\\"value2\\\"},\\\"rawPath\\\":\\\"\\\\\\\/path\\\\\\\/to\\\\\\\/resource\\\",\\\"routeKey\\\":\\\"$default\\\",\\\"cookies\\\":[\\\"cookie1\\\",\\\"cookie2\\\"] ... REDACTED FOR BREVITY ... \\\"statusCode\\\":200,\"headers\":{\"content-type\":\"application\/json\"}}    "]},{"type":"paragraph","inlineContent":[{"text":"SAM allows you to access the function logs from Amazon Cloudwatch.","type":"text"}]},{"type":"codeListing","syntax":"sh","code":["sam logs --stack-name APIGatewayLambda","","Access logging is disabled for HTTP API ID (g9m53sn7xa)                                           ","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:16:25.593000 INIT_START Runtime Version: provided:al2.v75      Runtime Version ARN: arn:aws:lambda:us-east-1::runtime:4f3438ed7de2250cc00ea1260c3dc3cd430fad27835d935a02573b6cf07ceed8","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:16:25.715000 START RequestId: d8afa647-8361-4bce-a817-c57b92a060af Version: $LATEST","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:16:25.758000 END RequestId: d8afa647-8361-4bce-a817-c57b92a060af","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:16:25.758000 REPORT RequestId: d8afa647-8361-4bce-a817-c57b92a060af    Duration: 40.74 ms      Billed Duration: 162 ms Memory Size: 512 MB       Max Memory Used: 34 MB  Init Duration: 120.64 ms","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:17:10.343000 START RequestId: ec8082c5-933b-4176-9c63-4c8fb41ca259 Version: $LATEST","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:17:10.350000 END RequestId: ec8082c5-933b-4176-9c63-4c8fb41ca259","2024\/12\/19\/[$LATEST]4dd42d66282145a2964ff13dfcd5dc65 2024-12-19T10:17:10.350000 REPORT RequestId: ec8082c5-933b-4176-9c63-4c8fb41ca259    Duration: 6.01 ms       Billed Duration: 7 ms   Memory Size: 512 MB       Max Memory Used: 35 MB"]},{"inlineContent":[{"text":"You can also tail the logs with the ","type":"text"},{"type":"codeVoice","code":"-t, --tail"},{"text":" flag.","type":"text"}],"type":"paragraph"},{"anchor":"Delete-the-function","text":"Delete the function","type":"heading","level":3},{"type":"paragraph","inlineContent":[{"text":"SAM allows you to delete your function and all infrastructure that is defined in the YAML template with just one command.","type":"text"}]},{"code":["sam delete","","Are you sure you want to delete the stack APIGatewayLambda in the region us-east-1 ? [y\/N]: y","Are you sure you want to delete the folder APIGatewayLambda in S3 which contains the artifacts? [y\/N]: y","- Deleting S3 object with key APIGatewayLambda\/1b5a27c048549382462bd8ea589f7cfe           ","- Deleting S3 object with key APIGatewayLambda\/396d2c434ecc24aaddb670bd5cca5fe8.template  ","- Deleting Cloudformation stack APIGatewayLambda","","Deleted successfully"],"syntax":"sh","type":"codeListing"},{"type":"heading","anchor":"Deploy-your-Lambda-function-with-the-AWS-Cloud-Development-Kit-CDK","level":2,"text":"Deploy your Lambda function with the AWS Cloud Development Kit (CDK)"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The AWS Cloud Development Kit is an open-source software development framework to define cloud infrastructure in code and provision it through AWS CloudFormation. The CDK provides high-level constructs that preconfigure AWS resources with best practices, and you can use familiar programming languages like TypeScript, Javascript, Python, Java, C#, and Go to define your infrastructure."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To use the CDK, you need to "},{"identifier":"https:\/\/docs.aws.amazon.com\/cdk\/v2\/guide\/getting_started.html","type":"reference","isActive":true},{"text":" on your machine. The CDK CLI provides a set of commands to manage your CDK projects.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the CDK when you want to define your infrastructure in code and manage the deployment of your Lambda function and other AWS services."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This example deploys the [APIGateway]((https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/blob\/main\/Examples\/APIGateway\/) example code.  It comprises a Lambda function that implements a REST API and an API Gateway to expose the function over HTTPS."}]},{"level":3,"anchor":"Create-a-CDK-project","text":"Create a CDK project","type":"heading"},{"inlineContent":[{"text":"To create a new CDK project, use the ","type":"text"},{"code":"cdk init","type":"codeVoice"},{"text":" command. The command creates a new directory with the project structure and the necessary files to define your infrastructure.","type":"text"}],"type":"paragraph"},{"syntax":"sh","type":"codeListing","code":["# In your Swift Lambda project folder","mkdir infra && cd infra","cdk init app --language typescript"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this example, the code to create a Swift Lambda function with the CDK is written in TypeScript. The following code creates a new Lambda function with the "},{"code":"swift","type":"codeVoice"},{"text":" runtime.","type":"text"}]},{"inlineContent":[{"text":"It requires the ","type":"text"},{"code":"@aws-cdk\/aws-lambda","type":"codeVoice"},{"type":"text","text":" package to define the Lambda function. You can install the dependency with the following command:"}],"type":"paragraph"},{"code":["npm install aws-cdk-lib constructs"],"type":"codeListing","syntax":"sh"},{"type":"paragraph","inlineContent":[{"text":"Then, in the lib folder, create a new file named ","type":"text"},{"code":"swift-lambda-stack.ts","type":"codeVoice"},{"type":"text","text":" with the following content:"}]},{"code":["import * as cdk from 'aws-cdk-lib';","import * as lambda from 'aws-cdk-lib\/aws-lambda';","","export class LambdaApiStack extends cdk.Stack {","  constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {","    super(scope, id, props);","","    \/\/ Create the Lambda function","    const lambdaFunction = new lambda.Function(this, 'SwiftLambdaFunction', {","      runtime: lambda.Runtime.PROVIDED_AL2,","      architecture: lambda.Architecture.ARM_64,","      handler: 'bootstrap',","      code: lambda.Code.fromAsset('..\/.build\/plugins\/AWSLambdaPackager\/outputs\/AWSLambdaPackager\/APIGatewayLambda\/APIGatewayLambda.zip'),","      memorySize: 512,","      timeout: cdk.Duration.seconds(30),","      environment: {","        LOG_LEVEL: 'debug',","      },","    });"," }","}    "],"syntax":"typescript","type":"codeListing"},{"inlineContent":[{"type":"text","text":"The code assumes you already built and packaged the APIGateway Lambda function with the "},{"type":"codeVoice","code":"swift package archive --allow-network-connections docker"},{"type":"text","text":" command, as described in the "},{"isActive":true,"overridingTitle":"Prerequisites","type":"reference","overridingTitleInlineContent":[{"text":"Prerequisites","type":"text"}],"identifier":"#prerequisites"},{"text":" section.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can write code to add an API Gateway to invoke your Lambda function. The following code creates an HTTP API Gateway that triggers the Lambda function."}]},{"type":"codeListing","syntax":"typescript","code":["\/\/ in the import section at the top","import * as apigateway from 'aws-cdk-lib\/aws-apigatewayv2';","import { HttpLambdaIntegration } from 'aws-cdk-lib\/aws-apigatewayv2-integrations';","","\/\/ in the constructor, after having created the Lambda function","\/\/ ...","","    \/\/ Create the API Gateway","    const httpApi = new apigateway.HttpApi(this, 'HttpApi', {","      defaultIntegration: new HttpLambdaIntegration({","        handler: lambdaFunction,","      }),","    });","","    \/\/ Output the API Gateway endpoint","    new cdk.CfnOutput(this, 'APIGatewayEndpoint', {","      value: httpApi.url!,","    });","","\/\/ ...    "]},{"type":"heading","level":3,"anchor":"Deploy-the-infrastructure","text":"Deploy the infrastructure"},{"type":"paragraph","inlineContent":[{"text":"To deploy the infrastructure, type the following commands.","type":"text"}]},{"code":["# Change to the infra directory","cd infra","","# Install the dependencies (only before the first deployment)","npm install ","","# Deploy the infrastructure","cdk deploy","","✨  Synthesis time: 2.88s","... redacted for brevity ...","Do you wish to deploy these changes (y\/n)? y","... redacted for brevity ..."," ✅  LambdaApiStack","","✨  Deployment time: 42.96s","","Outputs:","LambdaApiStack.ApiUrl = https:\/\/tyqnjcawh0.execute-api.eu-central-1.amazonaws.com\/","Stack ARN:","arn:aws:cloudformation:eu-central-1:012345678901:stack\/LambdaApiStack\/e0054390-be05-11ef-9504-065628de4b89","","✨  Total time: 45.84s"],"syntax":"sh","type":"codeListing"},{"level":3,"text":"Invoke your Lambda function","anchor":"Invoke-your-Lambda-function","type":"heading"},{"inlineContent":[{"text":"To invoke the Lambda function, use this ","type":"text"},{"type":"codeVoice","code":"curl"},{"text":" command line.","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"bash","code":["curl https:\/\/tyqnjcawh0.execute-api.eu-central-1.amazonaws.com"]},{"inlineContent":[{"type":"text","text":"Be sure to replace the URL with the API Gateway endpoint returned in the previous step."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This should print a JSON similar to"}]},{"syntax":"bash","code":["{\"version\":\"2.0\",\"rawPath\":\"\\\/\",\"isBase64Encoded\":false,\"rawQueryString\":\"\",\"headers\":{\"user-agent\":\"curl\\\/8.7.1\",\"accept\":\"*\\\/*\",\"host\":\"a5q74es3k2.execute-api.us-east-1.amazonaws.com\",\"content-length\":\"0\",\"x-amzn-trace-id\":\"Root=1-66fb0388-691f744d4bd3c99c7436a78d\",\"x-forwarded-port\":\"443\",\"x-forwarded-for\":\"81.0.0.43\",\"x-forwarded-proto\":\"https\"},\"requestContext\":{\"requestId\":\"e719cgNpoAMEcwA=\",\"http\":{\"sourceIp\":\"81.0.0.43\",\"path\":\"\\\/\",\"protocol\":\"HTTP\\\/1.1\",\"userAgent\":\"curl\\\/8.7.1\",\"method\":\"GET\"},\"stage\":\"$default\",\"apiId\":\"a5q74es3k2\",\"time\":\"30\\\/Sep\\\/2024:20:01:12 +0000\",\"timeEpoch\":1727726472922,\"domainPrefix\":\"a5q74es3k2\",\"domainName\":\"a5q74es3k2.execute-api.us-east-1.amazonaws.com\",\"accountId\":\"012345678901\"}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you have "},{"code":"jq","type":"codeVoice"},{"type":"text","text":" installed, you can use it to pretty print the output."}]},{"syntax":"bash","code":["curl -s  https:\/\/tyqnjcawh0.execute-api.eu-central-1.amazonaws.com | jq   ","{","  \"version\": \"2.0\",","  \"rawPath\": \"\/\",","  \"requestContext\": {","    \"domainPrefix\": \"a5q74es3k2\",","    \"stage\": \"$default\",","    \"timeEpoch\": 1727726558220,","    \"http\": {","      \"protocol\": \"HTTP\/1.1\",","      \"method\": \"GET\",","      \"userAgent\": \"curl\/8.7.1\",","      \"path\": \"\/\",","      \"sourceIp\": \"81.0.0.43\"","    },","    \"apiId\": \"a5q74es3k2\",","    \"accountId\": \"012345678901\",","    \"requestId\": \"e72KxgsRoAMEMSA=\",","    \"domainName\": \"a5q74es3k2.execute-api.us-east-1.amazonaws.com\",","    \"time\": \"30\/Sep\/2024:20:02:38 +0000\"","  },","  \"rawQueryString\": \"\",","  \"routeKey\": \"$default\",","  \"headers\": {","    \"x-forwarded-for\": \"81.0.0.43\",","    \"user-agent\": \"curl\/8.7.1\",","    \"host\": \"a5q74es3k2.execute-api.us-east-1.amazonaws.com\",","    \"accept\": \"*\/*\",","    \"x-amzn-trace-id\": \"Root=1-66fb03de-07533930192eaf5f540db0cb\",","    \"content-length\": \"0\",","    \"x-forwarded-proto\": \"https\",","    \"x-forwarded-port\": \"443\"","  },","  \"isBase64Encoded\": false","}"],"type":"codeListing"},{"anchor":"Delete-the-infrastructure","type":"heading","text":"Delete the infrastructure","level":3},{"type":"paragraph","inlineContent":[{"text":"When done testing, you can delete the infrastructure with this command.","type":"text"}]},{"syntax":"bash","type":"codeListing","code":["cdk destroy","","Are you sure you want to delete: LambdaApiStack (y\/n)? y","LambdaApiStack: destroying... [1\/1]","... redacted for brevity ..."," ✅  LambdaApiStack: destroyed"]},{"type":"heading","level":2,"text":"Third-party tools","anchor":"Third-party-tools"},{"type":"paragraph","inlineContent":[{"type":"text","text":"We welcome contributions to this section. If you have experience deploying Swift Lambda functions with third-party tools like Serverless Framework, Terraform, or Pulumi, please share your knowledge with the community."}]}]}],"abstract":[{"type":"text","text":"Learn how to deploy your Swift Lambda functions to AWS."}],"seeAlsoSections":[{"identifiers":["doc:\/\/AWSLambdaRuntimeCore\/tutorials\/table-of-content","doc:\/\/AWSLambdaRuntimeCore\/documentation\/AWSLambdaRuntimeCore\/quick-setup"],"anchor":"Essentials","title":"Essentials","generated":true}],"references":{"console-80-delete-role":{"variants":[{"traits":["1x","light"],"url":"\/images\/AWSLambdaRuntimeCore\/console-80-delete-role.png"}],"alt":"Console - delete IAM role","type":"image","identifier":"console-80-delete-role"},"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html":{"titleInlineContent":[{"type":"text","text":"install the SAM CLI"}],"url":"https:\/\/docs.aws.amazon.com\/serverless-application-model\/latest\/developerguide\/serverless-sam-cli-install.html","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/serverless-application-model\/latest\/developerguide\/serverless-sam-cli-install.html","title":"install the SAM CLI"},"https://aws.amazon.com/lambda/pricing/":{"titleInlineContent":[{"type":"text","text":"Lambda pricing"}],"url":"https:\/\/aws.amazon.com\/lambda\/pricing\/","type":"link","identifier":"https:\/\/aws.amazon.com\/lambda\/pricing\/","title":"Lambda pricing"},"#deploy-your-lambda-function-with-aws-cloud-development-kit-cdk":{"titleInlineContent":[{"type":"text","text":"Deploy your Lambda function with AWS Cloud Development Kit (CDK)"}],"url":"#deploy-your-lambda-function-with-aws-cloud-development-kit-cdk","type":"link","identifier":"#deploy-your-lambda-function-with-aws-cloud-development-kit-cdk","title":"Deploy your Lambda function with AWS Cloud Development Kit (CDK)"},"doc://AWSLambdaRuntimeCore/documentation/AWSLambdaRuntimeCore/quick-setup":{"title":"Getting Started Quickly","kind":"article","identifier":"doc:\/\/AWSLambdaRuntimeCore\/documentation\/AWSLambdaRuntimeCore\/quick-setup","abstract":[{"text":"Learn how to create your first project in 3 minutes.","type":"text"}],"url":"\/documentation\/awslambdaruntimecore\/quick-setup","type":"topic","role":"article"},"#prerequisites":{"titleInlineContent":[{"type":"text","text":"Prerequisites"}],"url":"#prerequisites","type":"link","identifier":"#prerequisites","title":"Prerequisites"},"doc://AWSLambdaRuntimeCore/documentation/AWSLambdaRuntimeCore":{"identifier":"doc:\/\/AWSLambdaRuntimeCore\/documentation\/AWSLambdaRuntimeCore","title":"AWSLambdaRuntimeCore","kind":"symbol","abstract":[{"text":"An AWS Lambda runtime for the Swift programming language","type":"text"}],"role":"collection","url":"\/documentation\/awslambdaruntimecore","type":"topic"},"https://aws.amazon.com/about-aws/global-infrastructure/":{"titleInlineContent":[{"type":"text","text":"AWS Global infrastructure"}],"url":"https:\/\/aws.amazon.com\/about-aws\/global-infrastructure\/","identifier":"https:\/\/aws.amazon.com\/about-aws\/global-infrastructure\/","type":"link","title":"AWS Global infrastructure"},"console-30-create-function":{"variants":[{"url":"\/images\/AWSLambdaRuntimeCore\/console-30-create-function.png","traits":["1x","light"]}],"alt":"Console - create function","identifier":"console-30-create-function","type":"image"},"#the-lambda-execution-iam-role":{"titleInlineContent":[{"text":"The Lambda execution IAM role","type":"text"}],"url":"#the-lambda-execution-iam-role","type":"link","identifier":"#the-lambda-execution-iam-role","title":"The Lambda execution IAM role"},"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey":{"titleInlineContent":[{"text":"Creating access keys for an IAM user","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_credentials_access-keys.html#Using_CreateAccessKey","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_credentials_access-keys.html#Using_CreateAccessKey","title":"Creating access keys for an IAM user"},"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users.html":{"titleInlineContent":[{"text":"Identity and Access Manager (IAM) user","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_users.html","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_users.html","title":"Identity and Access Manager (IAM) user"},"https://www.terraform.io/":{"titleInlineContent":[{"text":"Terraform","type":"text"}],"url":"https:\/\/www.terraform.io\/","type":"link","identifier":"https:\/\/www.terraform.io\/","title":"Terraform"},"doc://AWSLambdaRuntimeCore/tutorials/table-of-content":{"url":"\/tutorials\/table-of-content","role":"overview","abstract":[{"type":"text","text":"A step-by-step tutorial to learn how to implement, build, test, and deploy your first Lambda function written in Swift."}],"identifier":"doc:\/\/AWSLambdaRuntimeCore\/tutorials\/table-of-content","type":"topic","title":"Your First Lambda Function Written in Swift","kind":"overview"},"#deploy-your-lambda-function-with-aws-serverless-application-model-sam":{"titleInlineContent":[{"text":"Deploy your Lambda function with AWS Serverless Application Model (SAM)","type":"text"}],"url":"#deploy-your-lambda-function-with-aws-serverless-application-model-sam","identifier":"#deploy-your-lambda-function-with-aws-serverless-application-model-sam","type":"link","title":"Deploy your Lambda function with AWS Serverless Application Model (SAM)"},"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html":{"titleInlineContent":[{"text":"configuration","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/cli-configure-quickstart.html","identifier":"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/cli-configure-quickstart.html","type":"link","title":"configuration"},"https://www.pulumi.com/":{"titleInlineContent":[{"text":"Pulumi","type":"text"}],"url":"https:\/\/www.pulumi.com\/","identifier":"https:\/\/www.pulumi.com\/","type":"link","title":"Pulumi"},"https://docs.aws.amazon.com/cdk/v2/guide/getting_started.html":{"titleInlineContent":[{"text":"install the CDK CLI","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/cdk\/v2\/guide\/getting_started.html","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/cdk\/v2\/guide\/getting_started.html","title":"install the CDK CLI"},"Exmaples.HelloWorld/README.md":{"titleInlineContent":[{"text":"HelloWorld","type":"text"}],"url":"Exmaples.HelloWorld\/README.md","type":"link","identifier":"Exmaples.HelloWorld\/README.md","title":"HelloWorld"},"https://aws.amazon.com/serverless/sam/":{"titleInlineContent":[{"text":"AWS Serverless Application Model (SAM)","type":"text"}],"url":"https:\/\/aws.amazon.com\/serverless\/sam\/","type":"link","identifier":"https:\/\/aws.amazon.com\/serverless\/sam\/","title":"AWS Serverless Application Model (SAM)"},"https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html":{"titleInlineContent":[{"text":"installation","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/getting-started-install.html","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/getting-started-install.html","title":"installation"},"#deploy-your-lambda-function-with-the-aws-command-line-interface-cli":{"titleInlineContent":[{"text":"Deploy your Lambda function with the AWS Command Line Interface (CLI)","type":"text"}],"url":"#deploy-your-lambda-function-with-the-aws-command-line-interface-cli","type":"link","identifier":"#deploy-your-lambda-function-with-the-aws-command-line-interface-cli","title":"Deploy your Lambda function with the AWS Command Line Interface (CLI)"},"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_managed-vs-inline.html#aws-managed-policies":{"titleInlineContent":[{"text":"‘AdministratorAccess’ gives the user permission","type":"text"}],"url":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/access_policies_managed-vs-inline.html#aws-managed-policies","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/access_policies_managed-vs-inline.html#aws-managed-policies","title":"‘AdministratorAccess’ gives the user permission"},"https://aws.amazon.com/cdk/":{"titleInlineContent":[{"text":"AWS Cloud Development Kit (CDK)","type":"text"}],"url":"https:\/\/aws.amazon.com\/cdk\/","type":"link","identifier":"https:\/\/aws.amazon.com\/cdk\/","title":"AWS Cloud Development Kit (CDK)"},"#deploy-your-lambda-function-with-the-aws-console":{"titleInlineContent":[{"text":"Deploy your Lambda function with the AWS Console","type":"text"}],"url":"#deploy-your-lambda-function-with-the-aws-console","type":"link","identifier":"#deploy-your-lambda-function-with-the-aws-console","title":"Deploy your Lambda function with the AWS Console"},"console-50-upload-zip":{"variants":[{"traits":["1x","light"],"url":"\/images\/AWSLambdaRuntimeCore\/console-50-upload-zip.png"}],"alt":"Console - select zip file","type":"image","identifier":"console-50-upload-zip"},"console-60-prepare-test-event":{"variants":[{"traits":["1x","light"],"url":"\/images\/AWSLambdaRuntimeCore\/console-60-prepare-test-event.png"}],"alt":"Console - prepare test event","type":"image","identifier":"console-60-prepare-test-event"},"https://github.com/swift-server/swift-aws-lambda-runtime/tree/main/Examples":{"titleInlineContent":[{"type":"text","text":"Examples"}],"url":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/tree\/main\/Examples","type":"link","identifier":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/tree\/main\/Examples","title":"Examples"},"https://signin.aws.amazon.com/signup?request_type=register":{"titleInlineContent":[{"type":"text","text":"aws.amazon.com"}],"url":"https:\/\/signin.aws.amazon.com\/signup?request_type=register","type":"link","identifier":"https:\/\/signin.aws.amazon.com\/signup?request_type=register","title":"aws.amazon.com"},"console-80-delete-function":{"variants":[{"traits":["1x","light"],"url":"\/images\/AWSLambdaRuntimeCore\/console-80-delete-function.png"}],"alt":"Console - delete function","type":"image","identifier":"console-80-delete-function"},"console-20-dashboard":{"variants":[{"url":"\/images\/AWSLambdaRuntimeCore\/console-20-dashboard.png","traits":["1x","light"]}],"alt":"Console - Lambda dashboard when there is no function","type":"image","identifier":"console-20-dashboard"},"https://github.com/swift-server/swift-aws-lambda-runtime/blob/main/Examples/APIGateway/README.md":{"titleInlineContent":[{"text":"APIGateway example README file","type":"text"}],"url":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/blob\/main\/Examples\/APIGateway\/README.md","type":"link","identifier":"https:\/\/github.com\/swift-server\/swift-aws-lambda-runtime\/blob\/main\/Examples\/APIGateway\/README.md","title":"APIGateway example README file"},"#choosing-the-aws-region-where-to-deploy":{"titleInlineContent":[{"text":"Choosing the AWS Region where to deploy","type":"text"}],"url":"#choosing-the-aws-region-where-to-deploy","type":"link","identifier":"#choosing-the-aws-region-where-to-deploy","title":"Choosing the AWS Region where to deploy"},"console-40-select-zip-file":{"variants":[{"url":"\/images\/AWSLambdaRuntimeCore\/console-40-select-zip-file.png","traits":["1x","light"]}],"alt":"Console - select zip file","type":"image","identifier":"console-40-select-zip-file"},"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html":{"titleInlineContent":[{"type":"text","text":"Create an IAM User in your AWS account"}],"url":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_users_create.html","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/id_users_create.html","title":"Create an IAM User in your AWS account"},"https://docs.aws.amazon.com/IAM/latest/UserGuide/security-creds.html":{"titleInlineContent":[{"type":"text","text":"AWS Security Credentials"}],"url":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/security-creds.html","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/IAM\/latest\/UserGuide\/security-creds.html","title":"AWS Security Credentials"},"https://docs.aws.amazon.com/AmazonECR/latest/public/public-troubleshooting.html#public-troubleshooting-authentication":{"titleInlineContent":[{"type":"text","text":"Authentication issues"}],"url":"https:\/\/docs.aws.amazon.com\/AmazonECR\/latest\/public\/public-troubleshooting.html#public-troubleshooting-authentication","type":"link","identifier":"https:\/\/docs.aws.amazon.com\/AmazonECR\/latest\/public\/public-troubleshooting.html#public-troubleshooting-authentication","title":"Authentication issues"},"#third-party-tools":{"titleInlineContent":[{"type":"text","text":"Third-party tools"}],"url":"#third-party-tools","type":"link","identifier":"#third-party-tools","title":"Third-party tools"},"https://www.serverless.com/":{"titleInlineContent":[{"type":"text","text":"Serverless Framework"}],"url":"https:\/\/www.serverless.com\/","identifier":"https:\/\/www.serverless.com\/","type":"link","title":"Serverless Framework"},"console-10-regions":{"variants":[{"url":"\/images\/AWSLambdaRuntimeCore\/console-10-regions.png","traits":["1x","light"]}],"alt":"Console - Select AWS Region","identifier":"console-10-regions","type":"image"}}}